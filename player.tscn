[gd_scene load_steps=71 format=3 uid="uid://wp38gnqmdcqs"]

[ext_resource type="PackedScene" uid="uid://bsl1726vg27pm" path="res://assets/maria_animation_rig.blend" id="1_gdde5"]
[ext_resource type="Script" uid="uid://bk4xmmrhr0cj5" path="res://scripts/player.gd" id="1_om8sx"]
[ext_resource type="Script" uid="uid://dvvkgt736bhn3" path="res://scripts/player_components/camera_controller.gd" id="2_xg4h0"]
[ext_resource type="Script" uid="uid://ldf4sgx7md2t" path="res://scripts/components/state_machine.gd" id="3_32k0w"]
[ext_resource type="Script" uid="uid://c47rutq7bsxpd" path="res://scripts/player_components/screen_effects_manager.gd" id="3_pbfsw"]
[ext_resource type="Script" uid="uid://x75apcnqjl2" path="res://scripts/player_states/locomotion_states/walk.gd" id="5_qwe6b"]
[ext_resource type="Script" uid="uid://b6yu7tj6wh46c" path="res://scripts/player_components/animation_controller.gd" id="6_6aici"]
[ext_resource type="Script" uid="uid://1oyh5gx0tru5" path="res://scripts/player_states/locomotion_states/idle.gd" id="6_g5pys"]
[ext_resource type="Script" uid="uid://blvbyxh5ud4g0" path="res://scripts/player_states/locomotion_states/sprint.gd" id="6_xg4h0"]
[ext_resource type="Script" uid="uid://b24fwqliyuoe" path="res://scripts/player_states/locomotion_states/airborne.gd" id="8_bwjto"]
[ext_resource type="Script" uid="uid://mjbfiearrapg" path="res://scripts/player_states/combat_states/downward_slash.gd" id="8_n7ghd"]
[ext_resource type="Script" uid="uid://ba8s637itq84" path="res://scripts/player_states/combat_states/not_attacking.gd" id="8_urp6f"]
[ext_resource type="Script" uid="uid://ds5pgpcim42dg" path="res://scripts/player_states/combat_states/low_slash.gd" id="9_ivps1"]
[ext_resource type="Script" uid="uid://bq8y0x7ps1s5v" path="res://scripts/player_components/target_manager.gd" id="9_rnf4f"]
[ext_resource type="Script" uid="uid://cst66y2l1p0lc" path="res://scripts/player_states/combat_states/power_slash.gd" id="10_urp6f"]
[ext_resource type="PackedScene" uid="uid://timl11fn7e7r" path="res://components/hitbox.tscn" id="15_606se"]
[ext_resource type="PackedScene" uid="uid://cgg3yuwmr17cn" path="res://components/combat_manager.tscn" id="16_u1c27"]
[ext_resource type="Script" uid="uid://bkqea6iys40et" path="res://scripts/custom_resources/DamageData.gd" id="17_q13i1"]
[ext_resource type="Script" uid="uid://bhqmmiil3ivhf" path="res://scripts/custom_resources/Stats.gd" id="18_pylmc"]
[ext_resource type="PackedScene" uid="uid://hmbguqu4dkyv" path="res://components/hurtbox.tscn" id="19_pylmc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_om8sx"]
radius = 0.2
height = 1.4244629

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_606se"]
radius = 20.029297
height = 143.37975

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_pbfsw"]
filter_enabled = true
filters = ["../../CombatStateMachine/DownwardSlash", "../../CombatStateMachine/LowSlash", "Maria Model/Skeleton3D/BoneAttachment3D/Hitbox:monitorable", "Maria Model/Skeleton3D:mixamorig_LeftArm", "Maria Model/Skeleton3D:mixamorig_LeftForeArm", "Maria Model/Skeleton3D:mixamorig_LeftHand", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex1", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex2", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex3", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex4", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle1", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle2", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle3", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle4", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky1", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky2", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky3", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky4", "Maria Model/Skeleton3D:mixamorig_LeftHandRing1", "Maria Model/Skeleton3D:mixamorig_LeftHandRing2", "Maria Model/Skeleton3D:mixamorig_LeftHandRing3", "Maria Model/Skeleton3D:mixamorig_LeftHandRing4", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb1", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb2", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb3", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb4", "Maria Model/Skeleton3D:mixamorig_LeftShoulder", "Maria Model/Skeleton3D:mixamorig_Neck", "Maria Model/Skeleton3D:mixamorig_RightArm", "Maria Model/Skeleton3D:mixamorig_RightForeArm", "Maria Model/Skeleton3D:mixamorig_RightHand", "Maria Model/Skeleton3D:mixamorig_RightHandIndex1", "Maria Model/Skeleton3D:mixamorig_RightHandIndex2", "Maria Model/Skeleton3D:mixamorig_RightHandIndex3", "Maria Model/Skeleton3D:mixamorig_RightHandIndex4", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle1", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle2", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle3", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle4", "Maria Model/Skeleton3D:mixamorig_RightHandPinky1", "Maria Model/Skeleton3D:mixamorig_RightHandPinky2", "Maria Model/Skeleton3D:mixamorig_RightHandPinky3", "Maria Model/Skeleton3D:mixamorig_RightHandPinky4", "Maria Model/Skeleton3D:mixamorig_RightHandRing1", "Maria Model/Skeleton3D:mixamorig_RightHandRing2", "Maria Model/Skeleton3D:mixamorig_RightHandRing3", "Maria Model/Skeleton3D:mixamorig_RightHandRing4", "Maria Model/Skeleton3D:mixamorig_RightHandThumb1", "Maria Model/Skeleton3D:mixamorig_RightHandThumb2", "Maria Model/Skeleton3D:mixamorig_RightHandThumb3", "Maria Model/Skeleton3D:mixamorig_RightHandThumb4", "Maria Model/Skeleton3D:mixamorig_RightShoulder", "Maria Model/Skeleton3D:mixamorig_Spine", "Maria Model/Skeleton3D:mixamorig_Spine1", "Maria Model/Skeleton3D:mixamorig_Spine2"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qtqh7"]
animation = &"slash_downward_slash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2wuci"]
animation = &"slash_low_slash"
advance_on_start = true

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_634y6"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_efrwb"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7lmhl"]
switch_mode = 2
advance_mode = 2
advance_expression = "combat_state_machine.current_state.name == \"NotAttacking\""

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dx0e4"]
switch_mode = 2
advance_mode = 2
advance_expression = "combat_state_machine.current_state.name == \"NotAttacking\""

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_b88wv"]
states/End/position = Vector2(1071, 110)
states/Start/position = Vector2(311, 117)
states/slash_downward_slash/node = SubResource("AnimationNodeAnimation_qtqh7")
states/slash_downward_slash/position = Vector2(605, 41)
states/slash_low_slash/node = SubResource("AnimationNodeAnimation_2wuci")
states/slash_low_slash/position = Vector2(605, 117)
transitions = ["Start", "slash_downward_slash", SubResource("AnimationNodeStateMachineTransition_634y6"), "slash_downward_slash", "slash_low_slash", SubResource("AnimationNodeStateMachineTransition_efrwb"), "slash_downward_slash", "End", SubResource("AnimationNodeStateMachineTransition_7lmhl"), "slash_low_slash", "End", SubResource("AnimationNodeStateMachineTransition_dx0e4")]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pbfsw"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_iruf7"]
animation = &"falling_idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_j5n4i"]
filter_enabled = true
filters = ["Maria Model/Skeleton3D:mixamorig_LeftArm", "Maria Model/Skeleton3D:mixamorig_LeftForeArm", "Maria Model/Skeleton3D:mixamorig_LeftHand", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex1", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex2", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex3", "Maria Model/Skeleton3D:mixamorig_LeftHandIndex4", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle1", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle2", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle3", "Maria Model/Skeleton3D:mixamorig_LeftHandMiddle4", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky1", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky2", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky3", "Maria Model/Skeleton3D:mixamorig_LeftHandPinky4", "Maria Model/Skeleton3D:mixamorig_LeftHandRing1", "Maria Model/Skeleton3D:mixamorig_LeftHandRing2", "Maria Model/Skeleton3D:mixamorig_LeftHandRing3", "Maria Model/Skeleton3D:mixamorig_LeftHandRing4", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb1", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb2", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb3", "Maria Model/Skeleton3D:mixamorig_LeftHandThumb4", "Maria Model/Skeleton3D:mixamorig_LeftShoulder", "Maria Model/Skeleton3D:mixamorig_RightArm", "Maria Model/Skeleton3D:mixamorig_RightForeArm", "Maria Model/Skeleton3D:mixamorig_RightHand", "Maria Model/Skeleton3D:mixamorig_RightHandIndex1", "Maria Model/Skeleton3D:mixamorig_RightHandIndex2", "Maria Model/Skeleton3D:mixamorig_RightHandIndex3", "Maria Model/Skeleton3D:mixamorig_RightHandIndex4", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle1", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle2", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle3", "Maria Model/Skeleton3D:mixamorig_RightHandMiddle4", "Maria Model/Skeleton3D:mixamorig_RightHandPinky1", "Maria Model/Skeleton3D:mixamorig_RightHandPinky2", "Maria Model/Skeleton3D:mixamorig_RightHandPinky3", "Maria Model/Skeleton3D:mixamorig_RightHandPinky4", "Maria Model/Skeleton3D:mixamorig_RightHandRing1", "Maria Model/Skeleton3D:mixamorig_RightHandRing2", "Maria Model/Skeleton3D:mixamorig_RightHandRing3", "Maria Model/Skeleton3D:mixamorig_RightHandRing4", "Maria Model/Skeleton3D:mixamorig_RightHandThumb1", "Maria Model/Skeleton3D:mixamorig_RightHandThumb2", "Maria Model/Skeleton3D:mixamorig_RightHandThumb3", "Maria Model/Skeleton3D:mixamorig_RightHandThumb4", "Maria Model/Skeleton3D:mixamorig_RightShoulder"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_pbfsw"]
graph_offset = Vector2(198.16238, 36.973778)
nodes/output/position = Vector2(1260, 120)
nodes/Animation/node = SubResource("AnimationNodeAnimation_iruf7")
nodes/Animation/position = Vector2(740, 60)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_j5n4i")
nodes/Blend2/position = Vector2(1000, 100)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_pbfsw")
"nodes/Animation 2/position" = Vector2(740, 240)
node_connections = [&"output", 0, &"Blend2", &"Blend2", 0, &"Animation", &"Blend2", 1, &"Animation 2"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5tmop"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7ahtn"]
animation = &"run"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_7lmhl"]
blend_point_0/node = SubResource("AnimationNodeAnimation_5tmop")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_7ahtn")
blend_point_1/pos = 1.0
min_space = 0.0
snap = 0.5

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_dx0e4"]
animation = &"jump_forward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7lmhl"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jm5j8"]
animation = &"run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j5n4i"]
animation = &"strafe_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_634y6"]
animation = &"strafe_right_run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_efrwb"]
animation = &"strafe_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hiqhm"]
animation = &"strafe_left_run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tkwlq"]
animation = &"walk_backward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hl5qd"]
animation = &"run_backward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ek41f"]
animation = &"idle"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_jm5j8"]
blend_point_0/node = SubResource("AnimationNodeAnimation_7lmhl")
blend_point_0/pos = Vector2(0, 1)
blend_point_1/node = SubResource("AnimationNodeAnimation_jm5j8")
blend_point_1/pos = Vector2(0, 2)
blend_point_2/node = SubResource("AnimationNodeAnimation_j5n4i")
blend_point_2/pos = Vector2(1, 0)
blend_point_3/node = SubResource("AnimationNodeAnimation_634y6")
blend_point_3/pos = Vector2(2, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_efrwb")
blend_point_4/pos = Vector2(-1, 0)
blend_point_5/node = SubResource("AnimationNodeAnimation_hiqhm")
blend_point_5/pos = Vector2(-2, 0)
blend_point_6/node = SubResource("AnimationNodeAnimation_tkwlq")
blend_point_6/pos = Vector2(0, -1)
blend_point_7/node = SubResource("AnimationNodeAnimation_hl5qd")
blend_point_7/pos = Vector2(0, -2)
blend_point_8/node = SubResource("AnimationNodeAnimation_ek41f")
blend_point_8/pos = Vector2(0, 0)
min_space = Vector2(-2, -2)
max_space = Vector2(2, 2)
snap = Vector2(1, 1)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7hik5"]
animation = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j5n4i"]
advance_mode = 2

[sub_resource type="Curve" id="Curve_pbfsw"]
_data = [Vector2(0, 0), 0.0, 1.0, 0, 1, Vector2(1, 1), 1.0, 0.0, 1, 0]
point_count = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pbfsw"]
xfade_time = 0.15
xfade_curve = SubResource("Curve_pbfsw")
break_loop_at_end = true
advance_mode = 2
advance_expression = "input_dir.length() != 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5tmop"]
xfade_time = 0.15
break_loop_at_end = true
advance_mode = 2
advance_expression = "input_dir.length() == 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ek41f"]
xfade_time = 0.1
advance_mode = 2
advance_expression = "is_target_locked"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7ahtn"]
advance_mode = 2
advance_expression = "not is_target_locked"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jm5j8"]
xfade_time = 0.1
advance_mode = 2
advance_expression = "velocity.y > 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hiqhm"]
xfade_time = 0.1
advance_mode = 2
advance_expression = "velocity.y > 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tkwlq"]
xfade_time = 0.1
advance_mode = 2
advance_expression = "velocity.y > 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7hik5"]
advance_mode = 2
advance_expression = "velocity.y < 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qtqh7"]
xfade_time = 0.1
advance_mode = 2
advance_expression = "velocity.y < 0"

[sub_resource type="Curve" id="Curve_7ahtn"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2wuci"]
xfade_time = 0.2
xfade_curve = SubResource("Curve_7ahtn")
switch_mode = 2
advance_mode = 2
advance_expression = "is_on_floor()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_iruf7"]
advance_mode = 2
advance_expression = "is_on_floor()"

[sub_resource type="Curve" id="Curve_5tmop"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 1.4, 0.0, 0, 0]
point_count = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hl5qd"]
xfade_time = 0.2
xfade_curve = SubResource("Curve_5tmop")
advance_mode = 2
advance_expression = "velocity.y < 0"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_7lmhl"]
states/End/position = Vector2(1107, 92)
states/Falling/node = SubResource("AnimationNodeBlendTree_pbfsw")
states/Falling/position = Vector2(521, 207)
states/FreeLocomotion/node = SubResource("AnimationNodeBlendSpace1D_7lmhl")
states/FreeLocomotion/position = Vector2(449, 92)
states/JumpRaise/node = SubResource("AnimationNodeAnimation_dx0e4")
states/JumpRaise/position = Vector2(521, -38)
states/Start/position = Vector2(79, 92)
states/TargetedLocomotion/node = SubResource("AnimationNodeBlendSpace2D_jm5j8")
states/TargetedLocomotion/position = Vector2(678, 92)
states/idle/node = SubResource("AnimationNodeAnimation_7hik5")
states/idle/position = Vector2(245, 92)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_j5n4i"), "idle", "FreeLocomotion", SubResource("AnimationNodeStateMachineTransition_pbfsw"), "FreeLocomotion", "idle", SubResource("AnimationNodeStateMachineTransition_5tmop"), "FreeLocomotion", "TargetedLocomotion", SubResource("AnimationNodeStateMachineTransition_ek41f"), "TargetedLocomotion", "FreeLocomotion", SubResource("AnimationNodeStateMachineTransition_7ahtn"), "TargetedLocomotion", "JumpRaise", SubResource("AnimationNodeStateMachineTransition_jm5j8"), "idle", "JumpRaise", SubResource("AnimationNodeStateMachineTransition_hiqhm"), "FreeLocomotion", "JumpRaise", SubResource("AnimationNodeStateMachineTransition_tkwlq"), "FreeLocomotion", "Falling", SubResource("AnimationNodeStateMachineTransition_7hik5"), "TargetedLocomotion", "Falling", SubResource("AnimationNodeStateMachineTransition_qtqh7"), "Falling", "FreeLocomotion", SubResource("AnimationNodeStateMachineTransition_2wuci"), "Falling", "TargetedLocomotion", SubResource("AnimationNodeStateMachineTransition_iruf7"), "JumpRaise", "Falling", SubResource("AnimationNodeStateMachineTransition_hl5qd")]
graph_offset = Vector2(-12.717255, -63)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_pgbbb"]
graph_offset = Vector2(-524.8954, 30.747574)
nodes/Locomotion/node = SubResource("AnimationNodeStateMachine_7lmhl")
nodes/Locomotion/position = Vector2(-260, 100)
nodes/Combat/node = SubResource("AnimationNodeStateMachine_b88wv")
nodes/Combat/position = Vector2(-260, 340)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_pbfsw")
nodes/Blend2/position = Vector2(60, 160)
node_connections = [&"output", 0, &"Blend2", &"Blend2", 0, &"Locomotion", &"Blend2", 1, &"Combat"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_xg4h0"]
radius = 10.0

[sub_resource type="Resource" id="Resource_op7ga"]
script = ExtResource("17_q13i1")
damage_value = 21.0
metadata/_custom_type_script = "uid://bkqea6iys40et"

[sub_resource type="Resource" id="Resource_q13i1"]
script = ExtResource("18_pylmc")
health = 1000.0
stamina = 25.0
armor = 10.0
metadata/_custom_type_script = "uid://bhqmmiil3ivhf"

[node name="Player" type="CharacterBody3D"]
collision_layer = 2
script = ExtResource("1_om8sx")

[node name="SpringArm3D" type="SpringArm3D" parent="." node_paths=PackedStringArray("player")]
top_level = true
spring_length = 4.0
script = ExtResource("2_xg4h0")
player = NodePath("..")
camera_smoothing = 20.0

[node name="Camera3D" type="Camera3D" parent="SpringArm3D"]
current = true
fov = 70.0
script = ExtResource("3_pbfsw")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.71223146, 0)
shape = SubResource("CapsuleShape3D_om8sx")

[node name="Visuals" type="Node3D" parent="."]

[node name="maria_animation_rig" parent="Visuals" instance=ExtResource("1_gdde5")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Visuals/maria_animation_rig/Maria Model" index="0"]
bones/0/position = Vector3(-1.8115327, 3.063159, -89.79665)
bones/0/rotation = Quaternion(-0.6862174, -0.2545529, 0.2596057, 0.63001055)
bones/1/position = Vector3(0.004652034, 5.2453175, 0.2588343)
bones/1/rotation = Quaternion(0.17256026, 0.019894145, 0.017212382, 0.9846477)
bones/2/position = Vector3(1.5494886e-06, 11.066815, -2.5629437e-05)
bones/2/rotation = Quaternion(-0.0028687306, 0.010431574, -0.003745064, 0.9999345)
bones/3/position = Vector3(1.18278024e-07, 8.141912, 3.1087864e-05)
bones/3/rotation = Quaternion(0.09923728, 0.0110522695, -0.0039690332, 0.9949946)
bones/4/rotation = Quaternion(-0.10516618, 0.015094527, 0.010295424, 0.99428684)
bones/5/rotation = Quaternion(0.016373789, 0.061198827, 0.021547768, 0.99775875)
bones/7/rotation = Quaternion(-0.5966473, -0.40762502, 0.3592911, -0.5905623)
bones/8/position = Vector3(-1.3557989e-05, 9.14368, -2.5742352e-06)
bones/8/rotation = Quaternion(0.55712914, -0.09583763, 0.2426966, 0.7883658)
bones/9/position = Vector3(-1.271029e-06, 24.573866, -1.7389193e-06)
bones/9/rotation = Quaternion(0.039228924, 0.010735137, 0.39193627, 0.91909295)
bones/10/position = Vector3(-7.2982834e-07, 23.096619, -2.6888893e-07)
bones/10/rotation = Quaternion(0.08647943, -0.20228964, 0.115374796, 0.96865314)
bones/11/position = Vector3(-2.005484, 3.6603186, 1.5185275)
bones/11/rotation = Quaternion(0.26130056, -0.009438067, 0.26129037, 0.9291718)
bones/12/position = Vector3(-2.741814e-05, 3.2953856, -0.0001448244)
bones/12/rotation = Quaternion(0.11072676, 0.09944713, -0.31252733, 0.9381772)
bones/13/position = Vector3(-6.973744e-06, 3.5567439, 7.428229e-05)
bones/13/rotation = Quaternion(0.32919902, 0.43830323, -0.37735742, 0.7464046)
bones/14/position = Vector3(5.602835e-06, 3.328993, 1.347065e-05)
bones/15/position = Vector3(-2.326638, 11.104454, 0.22942446)
bones/15/rotation = Quaternion(0.6102055, -0.09126106, -0.051524166, 0.78528076)
bones/16/position = Vector3(-5.415172e-06, 2.6000576, -6.0023995e-06)
bones/16/rotation = Quaternion(0.39783055, -0.016342117, -0.0197909, 0.9170999)
bones/17/position = Vector3(4.5418665e-06, 2.000034, 2.95449e-06)
bones/17/rotation = Quaternion(0.6336577, -0.033462536, 0.024420239, 0.77250373)
bones/18/position = Vector3(-4.738215e-06, 2.455495, -5.4720467e-06)
bones/19/position = Vector3(-3.32001e-05, 11.447537, -8.339035e-05)
bones/19/rotation = Quaternion(0.66495085, -0.08698252, -0.116244294, 0.7326402)
bones/20/position = Vector3(-5.4984225e-06, 2.8999894, -5.1662296e-06)
bones/20/rotation = Quaternion(0.5940152, -1.714702e-05, -0.00028343906, 0.8044538)
bones/21/position = Vector3(-2.5586194e-06, 2.000042, 5.612037e-07)
bones/21/rotation = Quaternion(0.17315236, -0.010941871, 0.0031183355, 0.98482937)
bones/22/position = Vector3(2.327592e-06, 2.2850072, 1.9976314e-06)
bones/23/position = Vector3(2.2472908, 10.6055765, -0.26831427)
bones/23/rotation = Quaternion(0.6124837, -0.16686538, -0.12355044, 0.76272863)
bones/24/position = Vector3(-6.071299e-06, 3.000079, 9.1840514e-07)
bones/24/rotation = Quaternion(0.43049356, -0.0038766526, -0.00838407, 0.90254647)
bones/25/position = Vector3(6.1775627e-06, 2.2000172, 1.669222e-06)
bones/25/rotation = Quaternion(0.337554, 0.030446334, -0.088287234, 0.9366621)
bones/26/position = Vector3(2.7702001e-06, 2.186123, 8.7581475e-07)
bones/27/position = Vector3(4.0278563, 9.628185, 0.3416673)
bones/27/rotation = Quaternion(0.3831674, -0.20548977, -0.123005755, 0.892091)
bones/28/position = Vector3(-1.9819768e-06, 2.9005117, 1.1302973e-06)
bones/28/rotation = Quaternion(0.6338144, 0.00050981966, 0.0003560313, 0.773485)
bones/29/position = Vector3(2.5946001e-06, 1.2976576, -3.0562423e-06)
bones/29/rotation = Quaternion(0.22746581, -0.00016808057, -0.00090921717, 0.97378564)
bones/30/position = Vector3(3.395679e-06, 2.0129943, -2.2434951e-06)
bones/31/rotation = Quaternion(0.58808064, -0.43210214, 0.25254533, 0.63535005)
bones/32/position = Vector3(1.5546071e-05, 9.14358, -6.5911063e-06)
bones/32/rotation = Quaternion(0.5280765, 0.11591344, -0.32189965, 0.7772257)
bones/33/position = Vector3(-4.946804e-07, 24.573889, -4.6218593e-06)
bones/33/rotation = Quaternion(-0.11063108, 0.067177415, -0.5113673, 0.84955955)
bones/34/position = Vector3(-7.913787e-06, 23.096605, -2.5009617e-06)
bones/34/rotation = Quaternion(0.03526918, 0.24914779, -0.15432246, 0.9554402)
bones/35/position = Vector3(2.0055513, 3.6604128, 1.5177746)
bones/35/rotation = Quaternion(0.14452161, -0.17383647, -0.25850618, 0.93918526)
bones/36/position = Vector3(1.6868085e-05, 3.2955127, 4.9858656e-05)
bones/36/rotation = Quaternion(0.11187628, 0.14219995, 0.35107547, 0.91869956)
bones/37/position = Vector3(-3.7103884e-05, 3.5563815, 0.00012303874)
bones/37/rotation = Quaternion(0.07543968, -0.045832675, 0.44229263, 0.8925164)
bones/38/position = Vector3(-2.8610236e-06, 3.3291454, 1.8627907e-07)
bones/39/position = Vector3(2.3266401, 11.104394, 0.22852485)
bones/39/rotation = Quaternion(0.2710894, -0.14246877, 0.04180582, 0.95103395)
bones/40/position = Vector3(-1.3858296e-05, 2.600069, 2.9284092e-07)
bones/40/rotation = Quaternion(0.8329805, 0.0012502748, -0.001277639, 0.55329955)
bones/41/position = Vector3(1.2579609e-05, 2.0000217, 6.9172347e-07)
bones/41/rotation = Quaternion(0.28691164, -0.010326594, 0.012776395, 0.9578162)
bones/42/position = Vector3(4.8295724e-06, 2.4554482, -6.641467e-07)
bones/43/position = Vector3(2.7318347e-05, 11.447469, -0.0014863943)
bones/43/rotation = Quaternion(0.77569985, -0.015578589, 0.090206206, 0.62442774)
bones/44/position = Vector3(1.9666246e-05, 2.8999953, -1.2758064e-06)
bones/44/rotation = Quaternion(0.5076774, -1.633669e-06, 0.00027487995, 0.86154723)
bones/45/position = Vector3(8.1393534e-07, 2.0000305, 1.7578895e-07)
bones/45/rotation = Quaternion(0.2709722, -0.0166375, 0.0011702259, 0.96244276)
bones/46/position = Vector3(3.634379e-06, 2.2849867, -8.5741704e-07)
bones/47/position = Vector3(-2.2472868, 10.605476, -0.2694589)
bones/47/rotation = Quaternion(0.79990727, 0.03398945, 0.08515328, 0.5930785)
bones/48/position = Vector3(4.4432845e-06, 3.0000844, -3.2514563e-06)
bones/48/rotation = Quaternion(0.35236093, -0.0042031347, 0.002422033, 0.93585163)
bones/49/position = Vector3(8.037651e-06, 2.20002, -2.9469993e-07)
bones/49/rotation = Quaternion(0.431486, -0.009293361, -0.004465864, 0.9020607)
bones/50/position = Vector3(-3.461188e-06, 2.1861985, -8.325951e-07)
bones/51/position = Vector3(-4.027855, 9.628096, 0.34058437)
bones/51/rotation = Quaternion(0.7407855, 0.07588288, 0.14000508, 0.6525927)
bones/52/position = Vector3(3.394696e-06, 2.900615, 7.8917055e-06)
bones/52/rotation = Quaternion(0.37335825, -0.00031925042, -0.00060607266, 0.92768705)
bones/53/position = Vector3(-7.248385e-07, 1.2975874, 1.8949086e-06)
bones/53/rotation = Quaternion(0.4829382, 0.0004322212, 0.0010074447, 0.87565374)
bones/54/position = Vector3(-9.285759e-07, 2.012996, 1.9082036e-06)
bones/55/position = Vector3(9.688754, -5.6852555, -1.6886226)
bones/55/rotation = Quaternion(0.12766325, 0.623742, 0.76281714, -0.112952314)
bones/56/position = Vector3(9.868274e-07, 43.167957, 2.2974444e-05)
bones/56/rotation = Quaternion(-0.90917933, 0.0129593145, -0.02630593, 0.4153708)
bones/57/position = Vector3(2.9014386e-06, 40.817738, -2.4814913e-06)
bones/57/rotation = Quaternion(0.23928186, -0.05978557, -0.12563582, 0.9609295)
bones/58/position = Vector3(4.7032609e-07, 18.000008, -1.6698855e-06)
bones/58/rotation = Quaternion(0.5222091, -0.0106911, -0.012964055, 0.85265195)
bones/59/position = Vector3(2.6891396e-06, 13.768201, -1.6290873e-06)
bones/60/position = Vector3(-9.688771, -5.685197, -1.688623)
bones/60/rotation = Quaternion(-0.1464762, 0.62475187, 0.7486114, 0.16676597)
bones/61/position = Vector3(-1.9944005e-06, 43.168, 2.4666402e-05)
bones/61/rotation = Quaternion(-0.92681414, -0.03732017, 0.09018471, 0.36261484)
bones/62/position = Vector3(1.8199419e-06, 40.817715, -8.006662e-06)
bones/62/rotation = Quaternion(0.026501263, 0.05432609, 0.10924653, 0.99217516)
bones/63/position = Vector3(2.466702e-07, 17.999989, 1.5536762e-07)
bones/63/rotation = Quaternion(0.49173766, 0.008990573, 0.012569155, 0.87060624)
bones/64/position = Vector3(3.978106e-06, 13.768164, -9.926154e-07)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Visuals/maria_animation_rig/Maria Model/Skeleton3D" index="0"]
transform = Transform3D(-0.2624309, 0.03272958, 0.9643955, 0.020070067, 0.9993934, -0.0284556, -0.96474195, 0.01188769, -0.26292875, -26.27635, 28.165998, -95.75393)
bone_name = "mixamorig_RightHand"
bone_idx = 34

[node name="Hitbox" parent="Visuals/maria_animation_rig/Maria Model/Skeleton3D/BoneAttachment3D" instance=ExtResource("15_606se")]
unique_name_in_owner = true
transform = Transform3D(-0.018086743, 0.8396522, -0.5428227, 0.2862346, 0.5245366, 0.8018299, 0.9579884, -0.14087224, -0.24982473, 58.33279, 42.668964, -7.370468)
monitorable = false

[node name="CollisionShape3D" parent="Visuals/maria_animation_rig/Maria Model/Skeleton3D/BoneAttachment3D/Hitbox" index="0"]
transform = Transform3D(0.9999926, -3.1292439e-07, 1.5441328e-06, 9.313226e-07, 0.99999917, 8.821487e-06, -6.9104135e-07, -2.413988e-06, 0.99999374, -1.5035458, 12.218964, 0.8135452)
shape = SubResource("CapsuleShape3D_606se")

[node name="LocomotionStateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("3_32k0w")
initial_state = NodePath("Walk")

[node name="Walk" type="Node" parent="LocomotionStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("5_qwe6b")
idle_state_path = NodePath("../Idle")
sprint_state_path = NodePath("../Sprint")
airborne_state_path = NodePath("../Airborne")
player = NodePath("../..")

[node name="Sprint" type="Node" parent="LocomotionStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("6_xg4h0")
idle_state_path = NodePath("../Idle")
walk_state_path = NodePath("../Walk")
airborne_state_path = NodePath("../Airborne")
free_speed = 3.0
target_locked_speed = 2.75
player = NodePath("../..")

[node name="Idle" type="Node" parent="LocomotionStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("6_g5pys")
walk_state_path = NodePath("../Walk")
airborne_state_path = NodePath("../Airborne")
player = NodePath("../..")

[node name="Airborne" type="Node" parent="LocomotionStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("8_bwjto")
idle_state_path = NodePath("../Idle")
free_speed = 2.0
target_locked_speed = 2.0
player = NodePath("../..")

[node name="CombatStateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("3_32k0w")
initial_state = NodePath("NotAttacking")
metadata/_custom_type_script = "uid://ldf4sgx7md2t"

[node name="NotAttacking" type="Node" parent="CombatStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("8_urp6f")
downward_slash_state_path = NodePath("../DownwardSlash")
player = NodePath("../..")

[node name="DownwardSlash" type="Node" parent="CombatStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("8_n7ghd")
low_slash_state_path = NodePath("../LowSlash")
animation_name = "slash_downward_slash"
not_attacking_state_path = NodePath("../NotAttacking")
player = NodePath("../..")

[node name="LowSlash" type="Node" parent="CombatStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("9_ivps1")
power_slash_state_path = NodePath("../PowerSlash")
animation_name = "slash_low_slash"
not_attacking_state_path = NodePath("../NotAttacking")
player = NodePath("../..")

[node name="PowerSlash" type="Node" parent="CombatStateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("10_urp6f")
animation_name = "slash_power_slash"
not_attacking_state_path = NodePath("../NotAttacking")
player = NodePath("../..")

[node name="AnimationTree" type="AnimationTree" parent="." node_paths=PackedStringArray("player")]
unique_name_in_owner = true
root_node = NodePath("%AnimationTree/../Visuals/maria_animation_rig")
tree_root = SubResource("AnimationNodeBlendTree_pgbbb")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../Visuals/maria_animation_rig/AnimationPlayer")
parameters/Locomotion/Falling/Blend2/blend_amount = 0.5
parameters/Locomotion/FreeLocomotion/blend_position = 0.0
parameters/Locomotion/TargetedLocomotion/blend_position = Vector2(0, 0)
parameters/Blend2/blend_amount = 1.0
script = ExtResource("6_6aici")
player = NodePath("..")

[node name="TargetManager" type="Area3D" parent="." node_paths=PackedStringArray("player")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("9_rnf4f")
player = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TargetManager"]
shape = SubResource("CylinderShape3D_xg4h0")

[node name="CombatManager" parent="." node_paths=PackedStringArray("hurtbox", "hitbox") instance=ExtResource("16_u1c27")]
damage_data = SubResource("Resource_op7ga")
stats = SubResource("Resource_q13i1")
hurtbox = NodePath("../Hurtbox")
hitbox = NodePath("../Visuals/maria_animation_rig/Maria Model/Skeleton3D/BoneAttachment3D/Hitbox")

[node name="Hurtbox" parent="." instance=ExtResource("19_pylmc")]

[connection signal="entered" from="LocomotionStateMachine/Airborne" to="AnimationTree" method="_on_airborne_entered"]
[connection signal="body_entered" from="TargetManager" to="TargetManager" method="_on_body_entered"]
[connection signal="body_exited" from="TargetManager" to="TargetManager" method="_on_body_exited"]
[connection signal="struck" from="CombatManager" to="SpringArm3D/Camera3D" method="_on_combat_manager_struck"]

[editable path="Visuals/maria_animation_rig"]
[editable path="Visuals/maria_animation_rig/Maria Model/Skeleton3D/BoneAttachment3D/Hitbox"]
